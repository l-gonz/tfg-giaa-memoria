\chapter{Experiments and validation}
\label{chap:validation}

This chapter outlines the validation process for each essential component required for the proper functioning of the entire system, ranging from initial simulation tests to comprehensive flight tests conducted on the final guidance solution. The validation process follows the order depicted in Figure \ref{fig:validation-chart}.

The first section involves testing the integrity of the different components in the simulated environment. Initially, there is a component testing section where each part is tested individually. Afterwards comes the integration testing, where the SITL simulation of the PX4 flight controller is integrated with the AirSim environment and the DroneVisionControl offboard application to validate the exchange of control commands and images for the detection software.

In the second section, the simulation tools are employed to tune the PID controllers that drive the behaviour of the follow control solution. The purpose of the tuning process is to find good enough values for the control parameters to be able to validate the vision control solution and determine the limits of the simulation tools. During the process, first, the response of each of the two controllers will be analysed individually to select the appropriate gains. Afterwards, the controllers will be integrated together by applying the chosen values to the follow solution to ensure that they work in a satisfactory manner.

In the third section, once the software is proven to adhere to the established safety requirements, the simulation is moved to the HITL mode, where the software runs on dedicated hardware instead of on the simulation computer. This hardware includes the autopilot board Pixhawk 4 and the Raspberry Pi as its companion computer. The main goal is to verify that all the communication channels function as expected and that the devices deliver the required performance.

Lastly, in the fourth and final section, a series of flight tests are carried out, gradually increasing in complexity. These tests span from basic manual control of the vehicle using an RC controller to fully autonomous target-following flight executing in the complete system.

\begin{figure}
  \centering
  \makebox[\textwidth][c]{
  \includegraphics[width=1.2\textwidth, keepaspectratio]{img/validation-chart.jpg}}
  \caption{Summary of the validation process followed in this chapter.}\label{fig:validation-chart}
\end{figure}

\input{files/4-validation/4.1-sitl}
\input{files/4-validation/4.2-pid}
\input{files/4-validation/4.3-hitl}
\input{files/4-validation/4.4-flight}
